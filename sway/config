# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
#                                  Basic                                              #
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #

# ä¸»é”®(Mod1=<Alt>,Mod4=<Super>)
set $mod   Mod4

set $left  h
set $down  j
set $up    k
set $right l

set $term xfce4-terminal

# çª—å£
set $ws1 1:ğŸ› Term
set $ws2 2:â™¨ Edit
set $ws3 3:ğŸ” Browser
set $ws4 4:ğŸ’» Vbox
set $ws5 5:ğŸ“º Video
set $ws6 6:ğŸ¶ Music
set $ws7 7:ğŸ•¸ Office
set $ws8 8:ğŸ® Game
set $ws9 9:HDMI
set $ws0 10:ğŸ•¸ OBS
set $wsNULL Null

# å›¾ç‰‡
set $img_bg     ~/Pictures/bg/flowers/02.jpg

set $img_lock   swaylock -e -F -f -i ~/Pictures/bg/flowers/01.jpg

# åº”ç”¨åœ¨ç‰¹å®šçª—å£å¯åŠ¨
# swaymsg -t get_tree | grep "app_id"
assign [app_id="gedit"] $ws2
assign [class="VSCodium"] $ws2
assign [class="firefox"] $ws3
assign [class="Chromium"] $ws3
assign [class="netease-cloud-music"] $ws6
assign [class="Steam"] $ws8
assign [class="obs"] $ws0

for_window [class="dde-file-manager"] floating enable
#for_window [class=".*"] floating enable


# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
#                                  Output Display                                     #
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #

# å¤–æ¥æ˜¾ç¤ºå™¨
workspace $ws9 output HDMI-A-1

# è·å–å±å¹•ä¿¡æ¯:swaymsg -t get_outputs
# man 5 sway-output
output * {
	# èƒŒæ™¯:fill|fit|center|tile
  #      æ‹‰ä¼¸|å¡«å……|åˆé€‚|å±…ä¸­|ç“·ç – 
	background $img_bg fill

  # å¡«å……å¯æä¾›å›é€€é¢œè‰²ä»¥è¦†ç›–è¾“å‡ºçš„å‰©ä½™éƒ¨åˆ†
  # background $img_bg fit #FF0000
#
  # å•è‰²å¡«å……
  # background #FF0000 solid_color
 
	# åˆ†è¾¨ç‡
	resolution 1920x1080@60Hz

	# ç¼©æ”¾,HiDPIä¸æ”¯æŒXwaylandå®¢æˆ·ç«¯(çª—å£å°†å˜å¾—æ¨¡ç³Š)ã€‚
 	scale      0

  # ç¼©æ”¾è¾“å‡º:linear|nearest|smart
  #           æ¨¡ç³Š|çº¿æ€§|æ™ºèƒ½
  scale_filter linear

  # è‰²å½©æ¨¡å¼:rgb|bgr|vrgb|vbgr|none
  subpixel rgb

	# å±å¹•æ—‹è½¬
	transform  0

  # å»¶è¿Ÿæ¸²æŸ“
  max_render_time 1

  # é€šè¿‡DPMSå¯ç”¨æˆ–ç¦ç”¨æŒ‡å®šçš„è¾“å‡º
 	# dpms on   
#
  # åˆ‡æ¢è¾“å‡º
 	# toggle    
#
  # ç¦ç”¨|å¯ç”¨è¾“å‡º
  # disable|enable
#
}

output eDP-1 {

}

output HDMI-A-1 {

}

# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
#                                        Input                                        #
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #

# swaymsg -t get_inputs
# man 5 sway-input

# è§¦æ‘¸æ¿è®¾ç½®
input "2:14:ETPS/2_Elantech_Touchpad" {
  dwt              enabled
  tap              enabled
  # è‡ªç„¶æ»šåŠ¨æ–¹å¼
  natural_scroll   disenabled
  middle_emulation enabled
  # çµæ•åº¦
  pointer_accel    0.3
  # ç¿»é¡µé€Ÿåº¦
  scroll_factor 3
  # æ‰‹æŒ‡æ˜ å°„
  # lrm:1ä¸ªæ‰‹æŒ‡è§†ä¸ºå·¦å‡»ï¼Œ2ä¸ªæ‰‹æŒ‡è§†ä¸ºå³å‡»ï¼Œ3ä¸ªæ‰‹æŒ‡è§†ä¸ºä¸­å‡» 
  # lmr:1æŒ‡è§†ä¸ºå·¦å‡»ï¼Œ2æŒ‡è§†ä¸ºä¸­é”®å•å‡»ï¼Œ3æŒ‡è§†ä¸ºå³å‡»
  tap_button_map lrm
}

# æŒ‡ç‚¹æ†
input "2:14:ETPS/2_Elantech_TrackPoint" {
  tap              enabled
  # è‡ªç„¶æ»šåŠ¨æ–¹å¼
  natural_scroll   disenabled
  # çµæ•åº¦
  pointer_accel    0.1
  # ç¿»é¡µé€Ÿåº¦
  scroll_factor 3
}

# é”®ç›˜è®¾ç½®
# man 7 xkeyboard-config
input "6058:20564:Thinkpad_Extra_Buttons" {
  # é”®ç›˜å¸ƒå±€
  xkb_layout   us,de
  xkb_variant  ,nodeadkeys
  xkb_options  grp:alt_shift_toggle
  # å¯ç”¨CapsLock
  xkb_capslock enabled
  # å¯ç”¨NumLock
  xkb_numlock enabled
  # é”®ç›˜é‡å¤å»¶è¿Ÿé€Ÿç‡
  repeat_delay 500
  repeat_rate  5

  # å°†è¾“å…¥æ˜ å°„åˆ°æŒ‡å®šçš„è¾“å‡ºã€‚åªæœ‰å½“è®¾å¤‡æ˜¯æŒ‡é’ˆã€è§¦æ‘¸æˆ–ç»˜å›¾å¹³æ¿è®¾å¤‡æ—¶æ‰æœ‰æ„ä¹‰ã€‚
  # map_to_output 
}


# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
#                                        è‡ªå¯                                         #
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
 
exec mocp &
exec fcitx

exec swayidle -w \
                timeout 300 $img_lock \
                timeout 600 'swaymsg "output * dpms off"' \
                resume 'swaymsg "output * dpms on"' \
                before-sleep $img_lock 

# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
#                                        Keys                                         #
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #

# æ‰§è¡Œ< shellå‘½ä»¤>
# exec <shell command>

# ä¸execç±»ä¼¼ï¼Œä½†æ˜¯shellå‘½ä»¤å°†åœ¨é‡æ–°åŠ è½½åå†æ¬¡æ‰§è¡Œã€‚
# exec_always < shellå‘½ä»¤>

# éŸ³é‡(F1:0,F2:-,F3:+)
bindsym XF86AudioMute exec "amixer set Master toggle && amixer set Speaker on"
bindsym XF86AudioLowerVolume exec amixer set Master playback 5-  
bindsym XF86AudioRaiseVolume exec amixer set Master playback 5+  

# éº¦å…‹é£å¼€å…³(F4)
bindsym XF86AudioMicMute exec "amixer set Capture toggle"

# äº®åº¦(F5:-,F6:+)
bindsym XF86MonBrightnessDown exec "brightnessctl specific 5%-"
bindsym XF86MonBrightnessUp exec "brightnessctl specific 5%+"

# æ‰“å¼€ç»ˆç«¯
bindsym $mod+Return workspace $ws1; exec $term

# æ‰“å¼€åº”ç”¨èœå•
bindsym $mod+o exec rofi -show drun -theme config

# å…³é—­é¢æ¿
bindsym $mod+q kill

# é¢æ¿åˆ†å‰²æ–¹å‘
bindsym $mod+v splitv
bindsym $mod+b splith

# é¢æ¿å…¨å±
bindsym $mod+f fullscreen

# é¢æ¿æ‚¬æµ®|å¹³é“º
bindsym $mod+Shift+space floating toggle

# é¢åŒ…æ‚¬æµ®æ—¶æ”¹å˜ç„¦ç‚¹
bindsym $mod+space focus mode_toggle

# çˆ¶ç„¦ç‚¹
bindsym $mod+a focus parent

# éšè—|æ˜¾ç¤ºé¢æ¿
bindsym $mod+u move scratchpad
bindsym $mod+Shift+u scratchpad show

# ç§»åŠ¨é¢æ¿ç„¦è·
bindsym $mod+$left  focus left
bindsym $mod+$down  focus down
bindsym $mod+$up    focus up
bindsym $mod+$right focus right

# ç§»åŠ¨é¢æ¿
bindsym $mod+Shift+$left  move left
bindsym $mod+Shift+$down  move down
bindsym $mod+Shift+$up    move up
bindsym $mod+Shift+$right move right

# åˆ‡æ¢çª—å£
bindsym $mod+d workspace $wsNULL
bindsym $mod+1 workspace $ws1
bindsym $mod+2 workspace $ws2
bindsym $mod+3 workspace $ws3
bindsym $mod+4 workspace $ws4
bindsym $mod+5 workspace $ws5
bindsym $mod+6 workspace $ws6
bindsym $mod+7 workspace $ws7
bindsym $mod+8 workspace $ws8
bindsym $mod+9 workspace $ws9
bindsym $mod+0 workspace $ws0

# ç§»åŠ¨é¢ç‰ˆè‡³æŒ‡å®šçª—å£,å¹¶åˆ‡æ¢è‡³æ­¤çª—å£
bindsym $mod+Shift+1 move container to workspace $ws1;workspace $ws1
bindsym $mod+Shift+2 move container to workspace $ws2;workspace $ws2
bindsym $mod+Shift+3 move container to workspace $ws3;workspace $ws3
bindsym $mod+Shift+4 move container to workspace $ws4;workspace $ws4
bindsym $mod+Shift+5 move container to workspace $ws5;workspace $ws5
bindsym $mod+Shift+6 move container to workspace $ws6;workspace $ws6
bindsym $mod+Shift+7 move container to workspace $ws7;workspace $ws7
bindsym $mod+Shift+8 move container to workspace $ws8;workspace $ws8
bindsym $mod+Shift+9 move container to workspace $ws9;workspace $ws9
bindsym $mod+Shift+0 move container to workspace $ws0;workspace $ws0

# è¿”å›ä¸Šä¸€æ¬¡æ´»åŠ¨çš„çª—å£
workspace_auto_back_and_forth no
bindsym $mod+z workspace back_and_forth

# ç§»åŠ¨é¢æ¿è‡³ä¸Šä¸€æ¬¡æ´»åŠ¨çš„çª—å£
bindsym $mod+Shift+z move container to workspace back_and_forth; workspace back_and_forth

# åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ª|ä¸Šä¸€ä¸ªçª—å£
bindsym $mod+tab workspace next
bindsym $mod+Shift+tab workspace prev


# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
#                                        Mode                                         #
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #

# æˆªå±
bindsym Print mode "$screenshot"
set $screenshot ScreenShot => (1)Full (2)Panel (3)Part 
mode "$screenshot" {
  bindsym 1 exec grim ~/Pictures/$(date +%Y-%m-%d-%H-%M-%S).jpg -t jpeg ,mode "default"
  bindsym 2 exec "bash -c ~/.config/sway/screenshot_panel.sh" ,mode "default"
  bindsym 3 exec grim -g "$(slurp)" ~/Pictures/$(date +%Y-%m-%d-%H-%M-%S).jpg -t jpeg ,mode "default"

  bindsym Escape mode "default"
  bindsym Return mode "default"
  bindsym Print  mode "default"
}

# è°ƒæ•´é¢æ¿æ ·å¼
bindsym $mod+m mode "$border_style"
set $border_style Border Style => (1)æ— æ ‡é¢˜æ— è¾¹æ¡† (2)æœ‰æ ‡é¢˜æ— è¾¹æ¡† (3)æœ‰æ ‡é¢˜æœ‰è¾¹æ¡†
mode "$border_style" {
	bindsym 1 border none     ,mode "default"
	bindsym 2 border normal 0 ,mode "default"
	bindsym 3 border normal 3 ,mode "default"

  bindsym Escape mode "default"
  bindsym Return mode "default"
  bindsym $mod+m mode "default"
}

# sway
bindsym $mod+s mode "$sway"
set $sway swaywn => (r)eload (l)ock (b)ar (e)xit_Swaywm
mode "$sway" {
  bindsym r reload            ,mode "default"
  bindsym l exec $img_lock    ,mode "default"
  bindsym b bar  mode toggle  ,mode "default"
  bindsym e exec swaymsg exit ,mode "default"

  bindsym Escape mode "default"
  bindsym Return mode "default"
  bindsym $mod+s mode "default"
}

# ç³»ç»Ÿ
bindsym $mod+p mode "$system"
set $system System => (r)eboot (p)oweroff (s)uspend(men) (h)ibernate(swap) (H)hardinfo
mode "$system" {
  bindsym r exec systemctl reboot                 ,mode "default"
  bindsym p exec systemctl poweroff               ,mode "default"
  bindsym s exec systemctl suspend && $img_lock   ,mode "default"
  bindsym h exec systemctl hibernate && $img_lock ,mode "default"
  bindsym Shift+h exec hardinfo ,mode "default"

  bindsym Escape mode "default"
  bindsym Return mode "default"
  bindsym $mod+p mode "default"
}

# è°ƒæ•´é¢æ¿å¤§å°
bindsym $mod+r mode "resize"
mode "resize" {
    bindsym $left  resize grow   width  10px
    bindsym $down  resize shrink height 10px
    bindsym $up    resize grow   height 10px
    bindsym $right resize shrink width  10px

    bindsym Escape mode "default"
    bindsym Return mode "default"
    bindsym $mod+r mode "default"
}

# Browser
set $browser Browser => (f)irefox (c)hromium
bindsym $mod+Shift+b mode "$browser"
mode "$browser" {
	bindsym f workspace $ws3 ,exec firefox  ,mode "default"
  bindsym c workspace $ws3 ,exec chromium ,mode "default"

  bindsym Return mode "default"
  bindsym Escape mode "default"
  bindsym $mod+Shift+b mode "default"
}

# Office
set $wps Office => (w)ork (e)xcel (p)pt (P)df
bindsym $mod+Shift+o mode "$wps"
mode "$wps" {
  bindsym w workspace $ws7 ,exec wps ,mode "default"
  bindsym e workspace $ws7 ,exec et  ,mode "default"
  bindsym p workspace $ws7 ,exec wpp ,mode "default"
  bindsym Shift+p workspace $ws7 ,exec wpspdf ,mode "default"

  bindsym Return mode "default"
  bindsym Escape mode "default"
  bindsym $mod+Shift+o mode "default"
}

# Text
set $text Txt => (v)scodium (g)edit
bindsym $mod+Shift+t mode "$text"
mode "$text" {
  bindsym v workspace $ws2 ,exec codium ,mode "default"
  bindsym g workspace $ws2 ,exec gedit  ,mode "default"

  bindsym Return mode "default"
  bindsym Escape mode "default"
  bindsym $mod+Shift+t mode "default"
}

# å½•åˆ¶
set $recording recording => (1)obs
bindsym $mod+g mode "$recording"
mode "$recording" {
  bindsym 1 workspace $ws0; exec obs    ,mode "default"

  bindsym Return mode "default"
  bindsym Escape mode "default"
  bindsym $mod+g mode "default"
}

# æ–‡ä»¶ç®¡ç†å™¨
set $filemanager filemanager => (1)ranger (2)pcmanfm (3)dde-file-manager
bindsym $mod+e mode "$filemanager"
mode "$filemanager" {
  bindsym 1 exec $term -e ranger ,mode "default"
  bindsym 2 exec pcmanfm         ,mode "default"

  bindsym Return mode "default"
  bindsym Escape mode "default"
  bindsym $mod+e mode "default"
}

# é¢æ¿å¸ƒå±€
set $layout layout => (1)toggle split (2)stacking (3)tabbed
bindsym $mod+c mode "$layout"
mode "$layout" {
  bindsym 1 layout toggle split
  bindsym 2 layout stacking
  bindsym 3 layout tabbed

  bindsym Return mode "default"
  bindsym Escape mode "default"
  bindsym $mod+c mode "default"
}

set $network network => (1)nm-connection-editor
bindsym $mod+Shift+n mode "$network"
mode "$network" {
  bindsym 1 exec nm-connection-editor ,mode "default"

  bindsym Return mode "default"
  bindsym Escape mode "default"
  bindsym $mod+Shift+n mode "default"
}

set $media media => (1)mpv (2)vlc
bindsym $mod+Shift+m mode "$media"
mode "$media" {
  bindsym 1 exec mpv ,mode "default"
  bindsym 2 exec vlc ,mode "default"

  bindsym Return mode "default"
  bindsym Escape mode "default"
  bindsym $mod+Shift+m mode "default"
}


# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
#                                        Theme                                         #
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
 
set $white  #FFFFFF
set $white1 #F2EEEDD0
set $black1 #666666
set $blue1  #87CEFA
set $pink1  #FF69B4
set $rgba   #00000000

# é¢æ¿åˆ†å‰²é»˜è®¤æ–¹å‘:horizontal|vertical|auto
#                   å‚ç›´|æ°´å¹³|è‡ªåŠ¨
default_orientation  horizontal

# è®¾ç½®æ–°å¹³é“ºçª—å£çš„é»˜è®¤è¾¹æ¡†æ ·å¼
# normal|none|pixel [<n>]
default_border normal 3

# æ–°çª—å£åˆå§‹å¸ƒå±€:default|stacking|tabbed
#                é»˜è®¤|æ°´å¹³å †å |å‚ç›´å †å 
workspace_layout default

# æ˜¯å¦å¯ç”¨xwayland:enable|disable|force
xwayland enable

# çª—å£é—´éš™
gaps inner 20
gaps outer 0

# å¯ç”¨é¼ æ ‡æ‹–æ‹½æ‚¬æµ®çª—å£
floating_modifier $mod normal

# æ ‡é¢˜æ å­—ä½“å­—å·
font pango: Source Code Pro Medium 13

# æ ‡é¢˜æ æ–‡å­—å¯¹é½æ–¹å¼(left|center|right)
title_align center

# æ ‡é¢˜æ é«˜åº¦
titlebar_padding 3

#						            æ ‡é¢˜æ è¾¹æ¡† æ ‡é¢˜æ èƒŒæ™¯ æ ‡é¢˜æ å­—ä½“ åˆ†è£‚çº¿    è¾¹æ¡†çº¿
# é€‰ä¸­é¢æ¿
client.focused          $white1    $white1    $black1    $pink1     $white1
# é€‰ä¸­è¿‡ä½†ç„¦è·ä¸åœ¨æ­¤çš„é¢æ¿
client.focused_inactive $white1    $white1    $black1    $white1    $white1
# æœªé€‰ä¸­çš„é¢æ¿
client.unfocused        $white1    $white1    $black1    $white1    $white1
# ç´§æ€¥æç¤ºçš„é¢æ¿
client.urgent           $white1    $white1    $pink1     $white1    $white1

bar {
    id 1
    status_command          py3status -c ~/.config/sway/pystatus
    # å»é™¤çª—å£ç¼–å·
    strip_workspace_numbers yes
    # çŠ¶æ€æ åˆ†éš”ç¬¦ 
    separator_symbol        " "
    # é¡¶éƒ¨ å³ä¾§ åº•éƒ¨ å·¦ä¾§
    gaps 10 10 10 10
    position                top
    font pango:             Source Code Pro Medium 13
    # é«˜åº¦
  	height                  30
  	pango_markup            enabled

 colors {
	    # å­—ä½“é¢œè‰²
      statusline  $black1
	    # èƒŒæ™¯é¢œè‰²
      background  $white1
		  # åˆ†éš”ç¬¦é¢œè‰²
      separator   $blue1
      #                  è¾¹æ¡†      èƒŒæ™¯      å­—ä½“
	  	# é€‰ä¸­ç¼–å·çª—å£
      focused_workspace  $white1   $white1   $pink1
	  	# æœªé€‰ä¸­ç¼–å·çª—å£
      inactive_workspace $white1   $white1   $black1
	  	# æ´»åŠ¨ç¼–å·çª—å£
      active_workspace   $blue1    $blue1    $white
      # ç´§æ€¥æ´»åŠ¨çš„çª—å£
      urgent_workspace   $blue1    $blue1    $white
  	  # æ¨¡å—
      binding_mode       $blue1    $blue1    $white
    }
}
